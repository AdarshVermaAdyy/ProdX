<mat-sidenav-container class="sidenav-container">


   
    <mat-sidenav mode="side" #sidenav class="sidenav" [(opened)]="isSidenavOpen">
        <!-- <button mat-button class="toggle-btn" (click)="toggleSidenav()">Toogle sidenav</button> -->
        <div class="sidenav-content">
            <h4>Available Option</h4>
            <div *ngFor="let group of  getUniqueGroup()">
               
                <h4>{{group | uppercase}}</h4>
              
                <div *ngFor="let option  of optionalFieldsList; let i = index">
                    <ng-container *ngIf="option.group === group">
                        <mat-checkbox (change)="onCheckboxChange($event, i)">
                            {{option .label}}
                        </mat-checkbox>
                    </ng-container>
                </div>
                <div class="custom-divider mt-4"></div>
                <!-- </div> -->
            </div>
        </div>

    </mat-sidenav>
    <!-- </div> -->

    <mat-sidenav-content>
        <!-- <div class="main-content">  -->
        <!-- <div class="form-wrapper"> -->
        <!-- <motif-toast [autoHide]="true" type='error' [duration]="5000" [show]="showErrorToast" actionText="Learn more"
            ariaLabelCloseButton="Close info toast message">
            <ng-container>
                Please fill all mandatory fields.
            </ng-container>
        </motif-toast> 
         -->

        <form [formGroup]="dynamicForm" (ngSubmit)="onSubmit()">

            <!-- Dynamic Form Fields -->
            <div class="row">
                <!-- Product Boundary Condition -->
                <h4>Product Boundary Condition</h4>
                <div formArrayName="selectedValues">
                    <div formArrayName="productBoundaryCondition">
                        <div class="row">
                            <div *ngFor="let field of productBoundaryCondition.controls; let i = index"
                                [formGroupName]="i" class="col-4">
                                <div [ngSwitch]="field.get('type')?.value">
                                    <div *ngSwitchCase="'range'">

                                        <mat-label>{{ field.get('label')?.value }}:</mat-label>

                                        <!-- <div class="row"> 
                                                <mat-form-field>
                                                    <mat-grid-list cols="2" rowHeight="20px">
                                                        <mat-grid-tile>
                                                <label class="mat-label" for="min{{i}}" >Min:</label>
                                            </mat-grid-tile>
                                            <mat-grid-tile>
                                                <input matInput id="min{{i}}" type="number" formControlName="min" />
                                          
                                            </mat-grid-tile>
                                                <div *ngIf="field.get('min')?.invalid && (field.get('min')?.dirty || field.get('min')?.touched)"
                                                    class="text-danger">
                                                    <div *ngIf="field.get('min')?.errors?.['required']">
                                                        This field is required</div>
                                                </div>
                                            </mat-grid-list>
                                            </mat-form-field>
                                           
                                                <mat-form-field appearance="fill">
                                                  
                                                <label class="mat-label" for="max{{i}}">Max:</label>
                                                       
                                                <input matInput id="max{{i}}" type="number" formControlName="max" />
                                            
                                            <div *ngIf="field.get('max')?.invalid && (field.get('max')?.dirty || field.get('max')?.touched)"
                                                class="text-danger">
                                                <div *ngIf="field.get('max')?.errors?.['required']">
                                                    This field is required</div>
                                            </div>
                                        
                                        </mat-form-field>
                                        </div>
                                       -->
                                        <!-- </div> -->
                                        <mat-grid-list cols="2" rowHeight="60px">
                                            <mat-grid-tile>
                                                <mat-form-field>
                                                    <!-- <mat-grid-list cols="2"> -->
                                                        <!-- <mat-grid-tile> -->
                                                            <label class="mat-label" for="min{{i}}">Min:</label>
                                                        <!-- </mat-grid-tile> -->
                                                        <!-- <mat-grid-tile> -->
                                                            <input matInput id="min{{i}}" type="number"
                                                                formControlName="min" />
                                                        <!-- </mat-grid-tile> -->
                                                    <!-- </mat-grid-list> -->

                                                    <div *ngIf="field.get('min')?.invalid && (field.get('min')?.dirty || field.get('min')?.touched)"
                                                        class="text-danger">
                                                        <div *ngIf="field.get('min')?.errors?.['required']">
                                                            This field is required</div>
                                                    </div>
                                                </mat-form-field>
                                            </mat-grid-tile>


                                            <mat-grid-tile>
                                                <mat-form-field>
                                                    <!-- <mat-grid-list cols="2">
                                                        <mat-grid-tile> -->
                                                            <label class="mat-label" for="max{{i}}">Max:</label>
                                                        <!-- </mat-grid-tile>
                                                        <mat-grid-tile> -->
                                                            <input matInput id="max{{i}}" type="number"
                                                                formControlName="max" />

                                                            <div *ngIf="field.get('max')?.invalid && (field.get('max')?.dirty || field.get('max')?.touched)"
                                                                class="text-danger">
                                                                <div *ngIf="field.get('max')?.errors?.['required']">
                                                                    This field is required</div>
                                                            </div>
                                                        <!-- </mat-grid-tile>
                                                    </mat-grid-list> -->
                                                </mat-form-field>
                                            </mat-grid-tile>

                                        </mat-grid-list>

                                    </div>

                                    <div *ngSwitchCase="'dropdown'">
                                        <div class="fromDropdown">
                                        <mat-label>{{ field.get('label')?.value }}:</mat-label>
                                        <mat-form-field appearance="fill">
                                            <mat-select formControlName="value">
                                                <mat-option *ngFor="let option of field.get('options')?.value"
                                                    [value]="option">{{ option }}</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                        </div>

                                    </div>

                                    <div *ngSwitchCase="'text'">
                                        <mat-form-field>
                                            <mat-label>{{ field.get('label')?.value }}:</mat-label>
                                            <input matInput type="text" formControlName="value" />
                                        </mat-form-field>
                                    </div>

                                    <div *ngSwitchCase="'radio'">
                                        <mat-label>{{ field.get('label')?.value }}:</mat-label>
                                        <mat-radio-group formControlName="value">
                                            <div *ngFor="let option of field.get('options')?.value">

                                                <mat-radio-button type="radio" [value]="option"> {{ option }}
                                                </mat-radio-button>
                                            </div>
                                        </mat-radio-group>
                                    </div>
                                </div>
                                <div
                                    *ngIf="field.get('value')?.invalid && (field.get('value')?.dirty || field.get('value')?.touched)">
                                    <div *ngIf="field.get('value')?.errors?.['required']">
                                        <span>This field is required</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Premium Details -->
                <div class="custom-divider mt-4"></div>
                <!-- <div class="custom-divider mt-4"></div> -->
                <h4>Product Service - Non-financial Alterations</h4>
                <div formArrayName="selectedValues">
                    <div formArrayName="premiumDetails">
                        <div class="row">
                            <div *ngFor="let field of premiumDetails.controls; let i = index" [formGroupName]="i"
                                class="col-4">
                                <div [ngSwitch]="field.get('type')?.value">
                                    <div *ngSwitchCase="'dropdown'">
                                        <div class="fromDropdown">
                                        <mat-label>{{ field.get('label')?.value }}:</mat-label>
                                        <mat-form-field appearance="fill">
                                            <mat-select formControlName="value">
                                                <mat-option *ngFor="let option of field.get('options')?.value"
                                                    [value]="option">{{ option }}</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                                    </div>
                                    <div *ngSwitchCase="'radio'">
                                        <label>{{ field.get('label')?.value }}:</label>
                                        <div *ngFor="let option of field.get('options')?.value">
                                            <input matInput type="radio" [formControlName]="'value'" [value]="option" />
                                            {{ option }}
                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="field.get('value')?.invalid && (field.get('value')?.dirty || field.get('value')?.touched)"
                                    class="text-danger">
                                    <div *ngIf="field.get('value')?.errors?.['required']">This field is required</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="custom-divider mt-4"></div>
                <h4> Forefeature/Reinstatement</h4>
                <div formArrayName="selectedValues">
                    <div formArrayName="featreandReinsate">
                        <div class="row">
                            <div *ngFor="let field of featreandReinsate.controls; let i = index" [formGroupName]="i"
                                class="col-4">
                                <div [ngSwitch]="field.get('type')?.value">
                                    <div *ngSwitchCase="'dropdown'">
                                        <div class="fromDropdown">
                                        <mat-label>{{ field.get('label')?.value }}:</mat-label>
                                        <mat-form-field appearance="fill">
                                            <mat-select formControlName="value">
                                                <mat-option *ngFor="let option of field.get('options')?.value"
                                                    [value]="option">{{ option }}</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                                    </div>
                                    <div *ngSwitchCase="'radio'">
                                        <mat-label>{{ field.get('label')?.value }}:</mat-label>
                                        <div *ngFor="let option of field.get('options')?.value">
                                            <input matInput type="radio" [formControlName]="'value'" [value]="option" />
                                            {{ option }}
                                        </div>
                                    </div>
                                </div>
                                <div
                                    *ngIf="field.get('value')?.invalid && (field.get('value')?.dirty || field.get('value')?.touched)">
                                    <div *ngIf="field.get('value')?.errors?.['required']">This field is required</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- FeauterReinstate -->
                <!-- <h4>Feature/Reinstatement</h4>
      <div formArrayName="selectedValues" >
        <div formArrayName="featreandReinsate" > 
            <div class="row">
          <div *ngFor="let field of featreandReinsate.controls; let i = index" [formGroupName]="i" class="col-6">
            <div [ngSwitch]="field.get('type')?.value">
              <div *ngSwitchCase="'dropdown'">
                <label  >{{ field.get('label')?.value }}:</label>
                <mat-select formControlName="value" >
                  <mat-option *ngFor="let option of field.get('options')?.value" [value]="option">{{ option }}</mat-option>
                </mat-select>
              </div>
              <div *ngSwitchCase="'radio'">
                <label  >{{ field.get('label')?.value }}:</label>
                <div *ngFor="let option of field.get('options')?.value">
                  <input matInput type="radio" [formControlName]="'value'" [value]="option" /> {{ option }}
                </div>
              </div>
            </div>
            <div *ngIf="field.get('value')?.invalid && (field.get('value')?.dirty || field.get('value')?.touched)" class="text-danger">
              <div *ngIf="field.get('value')?.errors?.['required']"> <span>This field is required</span></div>
            </div>
          </div>
          </div>
        </div>
      </div> -->

                <!-- Product Servicing- Major Alterations -->
                <div class="custom-divider mt-4"></div>
                <h4>Product Servicing- Major Alterations</h4>
                <div formArrayName="selectedValues">
                    <div formArrayName="productServicingAlteration">
                        <div class="row">
                            <div *ngFor="let field of  productServicingAlteration.controls; let i = index"
                                [formGroupName]="i" class="col-4">
                                <div [ngSwitch]="field.get('type')?.value">
                                    
                                    <div *ngSwitchCase="'dropdown'">
                                        <div class="fromDropdown">
                                        <mat-label>{{ field.get('label')?.value }}:</mat-label>
                                        <mat-form-field appearance="fill">
                                            <mat-select formControlName="value">
                                                <mat-option *ngFor="let option of field.get('options')?.value"
                                                    [value]="option">{{ option }}</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                        </div>
                                    </div>
                                    <div *ngSwitchCase="'radio'">
                                        <mat-label>{{ field.get('label')?.value }}:</mat-label>
                                        <div *ngFor="let option of field.get('options')?.value">
                                            <input matInput type="radio" [formControlName]="'value'" [value]="option" />
                                            {{ option }}
                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="field.get('value')?.invalid && (field.get('value')?.dirty || field.get('value')?.touched)"
                                    class="text-danger">
                                    <div *ngIf="field.get('value')?.errors?.['required']">This field is required</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="custom-divider mt-4"></div>
                <!-- Termination/Cancellation/Claims -->

                <h4>Termination/Cancellation/Claims</h4>
                <div formArrayName="selectedValues">
                    <div formArrayName="terminationCancellation">
                        <div class="row">
                            <div *ngFor="let field of terminationCancellation.controls; let i = index"
                                [formGroupName]="i" class="col-4">
                                <div [ngSwitch]="field.get('type')?.value">
                                    <div *ngSwitchCase="'dropdown'">
                                        <div class="fromDropdown">
                                        <mat-label>{{field.get('label')?.value}}:</mat-label>
                                        <mat-form-field>
                                            <mat-select formControlName="value">
                                                <mat-option *ngFor="let option of field.get('options')?.value"
                                                    [value]="option">{{option}}</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                        </div>
                                    </div>
                                    <div *ngSwitchCase="'radio'">
                                        <mat-label>{{ field.get('label')?.value }}:</mat-label>
                                        <div *ngFor="let option of field.get('options')?.value">
                                            <input matInput type="radio" [formControlName]="'value'" [value]="option" />
                                            {{ option }}
                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="field.get('value')?.invalid && (field.get('value')?.dirty || field.get('value')?.touched)"
                                    class="text-danger">
                                    <div *ngIf="field.get('value')?.errors?.['required']">This field is required</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <h4>prodcut Boundary</h4>
                <div formArrayName="selectedValues">
                    <div formArrayName="productBoundary">
                        <div class="row">
                            <div *ngFor="let field of productBoundary.controls; let i = index" [formGroupName]="i"
                                class="col-4">
                                <div [ngSwitch]="field.get('type')?.value">
                                    <div *ngSwitchCase="'dropdown'">
                                        <div class="fromDropdown">
                                        <mat-label>{{ field.get('label')?.value }}:</mat-label>
                                        <mat-form-field appearance="fill">
                                            <mat-select formControlName="value">
                                                <mat-option *ngFor="let option of field.get('options')?.value"
                                                    [value]="option">{{ option }}</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                        </div>
                                    </div>
                                    <div *ngSwitchCase="'radio'">
                                        <mat-label>{{ field.get('label')?.value }}:</mat-label>
                                        <div *ngFor="let option of field.get('options')?.value">
                                            <input matInput type="radio" [formControlName]="'value'" [value]="option" />
                                            {{ option }}
                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="field.get('value')?.invalid && (field.get('value')?.dirty || field.get('value')?.touched)"
                                    class="text-danger">
                                    <div *ngIf="field.get('value')?.errors?.['required']">This field is required</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
            <div class="form-btn-wrapper">
                <button mat-button size="medium" class="mt-3" (click)="onSubmit()" [disabled]="dynamicForm.invalid">Save
                    as Draft</button>
                <button mat-button size="medium" class="mt-3" (click)="next()"
                    [disabled]="dynamicForm.invalid">Next</button>
            </div>

        </form>

        <!-- </div> -->
    </mat-sidenav-content>
    <!-- </div> -->
</mat-sidenav-container>